import React, { useState } from "react";
import "./Rules.css";
import { convert } from "html-to-text";
import ReactQuill from "react-quill";
import "react-quill/dist/quill.snow.css";

const Rules = () => {
	const [editorHtml, setEditorHtml] = useState("");
	const [editorText, setEditorText] = useState("");

	const handleEditorChange = (html) => {
		convertHtmlToPlainText(html);
		setEditorHtml(html);
	};

	function convertHtmlToPlainText(html) {
		const tempElement = document.createElement("div");
		tempElement.innerHTML = html;

		// Preserve line breaks (`<br>` becomes `\n`) and remove other tags
		const plainText = tempElement.innerHTML
			.replace(/<br\s*\/?>/g, "\n") // Replace <br> tags with newlines
			.replace(/<\/p>/g, "\n") // Replace closing <p> tags with newlines
			.replace(/<[^>]+>/g, ""); // Remove all other HTML tags

		setEditorText(plainText.trim());
	}

	//specific styles for the editor
	const editorStyles = {
		width: "100%",
		height: "100%",
	};

	//modules for text formatting options
	const modules = {
		toolbar: [
			[{ header: [1, 2, 3, 4, 5, 6, false] }],
			[{ font: [] }],
			[{ size: [] }],
			[
				{ align: "left" },
				{ align: "center" },
				{ align: "right" },
				{ align: "justify" },
			],
			["bold", "italic", "underline", "strike", "blockquote"],
			[
				{ list: "ordered" },
				{ list: "bullet" },
				{ indent: "-1" },
				{ indent: "+1" },
			],
			["link", "image"],
			["clean"],
		],
	};

	return (
		<div className="rules-container">
			<h2>Rules and Regulations</h2>

			<main>
				<section className="text-editor">
					<div>
						<ReactQuill
							theme="snow"
							value={editorHtml}
							onChange={handleEditorChange}
							style={editorStyles} //styles
							modules={modules} //text formatting options
							placeholder="Regulations..."
						/>
					</div>

					<button>Save Change</button>
				</section>
				<section className="text-preview">
					<h4>Rules and Regulations</h4>

					{/* <div>{editorText}</div> */}

					<aside>
						<svg
							width="261"
							height="149"
							viewBox="0 0 261 149"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<g clip-path="url(#clip0_1182_14077)">
								<path
									d="M200.977 102.543H146.676V103.153H200.977V102.543Z"
									fill="#3F3D56"
								/>
								<path
									d="M200.977 106.816H146.676V107.427H200.977V106.816Z"
									fill="#3F3D56"
								/>
								<path
									d="M200.977 111.082H146.676V111.692H200.977V111.082Z"
									fill="#3F3D56"
								/>
								<path
									d="M158.213 95.6162H145.49V85.1836H158.213V95.6162ZM145.999 95.1073H157.704V85.6925H145.999V95.1073Z"
									fill="#3F3D56"
								/>
								<path
									d="M151.75 92.9323C153.09 92.9323 154.176 91.8466 154.176 90.5072C154.176 89.1678 153.09 88.082 151.75 88.082C150.411 88.082 149.325 89.1678 149.325 90.5072C149.325 91.8466 150.411 92.9323 151.75 92.9323Z"
									fill="#13A541"
								/>
								<path
									d="M200.977 17.3594H146.676V17.9695H200.977V17.3594Z"
									fill="#3F3D56"
								/>
								<path
									d="M200.977 21.6289H146.676V22.239H200.977V21.6289Z"
									fill="#3F3D56"
								/>
								<path
									d="M200.977 25.9023H146.676V26.5125H200.977V25.9023Z"
									fill="#3F3D56"
								/>
								<path
									d="M158.213 10.4326H145.49V0H158.213V10.4326ZM145.999 9.92368H157.704V0.508906H145.999V9.92368Z"
									fill="#3F3D56"
								/>
								<path
									d="M151.75 7.74875C153.09 7.74875 154.176 6.66297 154.176 5.32359C154.176 3.98422 153.09 2.89844 151.75 2.89844C150.411 2.89844 149.325 3.98422 149.325 5.32359C149.325 6.66297 150.411 7.74875 151.75 7.74875Z"
									fill="#13A541"
								/>
								<path
									d="M261 66.168H206.699V66.7781H261V66.168Z"
									fill="#3F3D56"
								/>
								<path
									d="M261 70.4375H206.699V71.0476H261V70.4375Z"
									fill="#3F3D56"
								/>
								<path
									d="M261 74.707H206.699V75.3172H261V74.707Z"
									fill="#3F3D56"
								/>
								<path
									d="M218.236 59.2373H205.513V48.8047H218.236V59.2373ZM206.022 58.7284H217.727V49.3136H206.022V58.7284Z"
									fill="#3F3D56"
								/>
								<path
									d="M211.773 56.5534C213.112 56.5534 214.198 55.4677 214.198 54.1283C214.198 52.7889 213.112 51.7031 211.773 51.7031C210.434 51.7031 209.348 52.7889 209.348 54.1283C209.348 55.4677 210.434 56.5534 211.773 56.5534Z"
									fill="#13A541"
								/>
								<path
									d="M63.5559 82.3913C63.3421 82.4069 63.1336 82.4649 62.9423 82.5618C62.7511 82.6588 62.5811 82.7927 62.4421 82.956L60.54 85.17L60.031 85.7619C59.7495 86.0898 59.6096 86.5159 59.6417 86.9469C59.6739 87.3778 59.8757 87.7785 60.2028 88.0609L68.6385 95.3116L83.5991 108.166C83.9115 108.434 84.3136 108.574 84.7249 108.558C85.1362 108.543 85.5263 108.372 85.8172 108.081C85.846 108.052 85.8713 108.024 85.8981 107.994L87.3542 106.301L88.3107 105.187C88.3877 105.098 88.4547 105.001 88.5106 104.897C88.6575 104.623 88.7232 104.312 88.7001 104.002C88.6845 103.788 88.6265 103.579 88.5296 103.388C88.4326 103.197 88.2986 103.027 88.1354 102.888L86.3521 101.355L73.1588 90.0173L64.7407 82.7807C64.4131 82.4989 63.9869 82.3589 63.5559 82.3913Z"
									fill="#13A541"
								/>
								<path
									d="M59.1462 75.6464C66.5583 75.6464 72.567 69.6377 72.567 62.2255C72.567 54.8134 66.5583 48.8047 59.1462 48.8047C51.7341 48.8047 45.7253 54.8134 45.7253 62.2255C45.7253 69.6377 51.7341 75.6464 59.1462 75.6464Z"
									fill="#13A541"
								/>
								<path
									d="M55.7092 113.762H52.0079C51.5757 113.762 51.1614 113.934 50.8558 114.24C50.5502 114.545 50.3783 114.96 50.3779 115.392V146.239C50.3783 146.671 50.5502 147.085 50.8558 147.391C51.1614 147.696 51.5757 147.868 52.0079 147.869H55.7092C56.1414 147.868 56.5557 147.696 56.8613 147.391C57.1669 147.085 57.3388 146.671 57.3392 146.239V115.392C57.3388 114.96 57.1669 114.545 56.8613 114.24C56.5557 113.934 56.1414 113.762 55.7092 113.762Z"
									fill="#2F2E41"
								/>
								<path
									d="M63.5307 113.762H59.8294C59.3973 113.762 58.9829 113.934 58.6773 114.24C58.3717 114.545 58.1999 114.96 58.1995 115.392V146.239C58.1999 146.671 58.3717 147.085 58.6773 147.391C58.9829 147.696 59.3973 147.868 59.8294 147.869H63.5307C63.7448 147.869 63.9567 147.826 64.1545 147.745C64.3523 147.663 64.532 147.543 64.6833 147.391C64.8347 147.24 64.9547 147.06 65.0367 146.862C65.1186 146.665 65.1607 146.453 65.1607 146.239V115.392C65.1607 115.178 65.1186 114.966 65.0367 114.768C64.9547 114.57 64.8347 114.39 64.6833 114.239C64.532 114.088 64.3523 113.968 64.1545 113.886C63.9567 113.804 63.7448 113.762 63.5307 113.762Z"
									fill="#2F2E41"
								/>
								<path
									d="M63.3594 119.612L50.9961 119.288C50.4564 119.274 49.9247 119.154 49.4317 118.934C48.9387 118.714 48.494 118.398 48.1232 118.006C47.7524 117.613 47.4628 117.152 47.271 116.647C47.0793 116.142 46.9892 115.605 47.0059 115.065C47.2507 107.177 47.8344 90.1087 47.8402 89.9429C47.8401 87.7874 48.5144 85.686 49.7684 83.9329C51.0225 82.1798 52.7936 80.8629 54.8336 80.1668C56.8735 79.4707 59.0801 79.4301 61.1443 80.0509C63.2084 80.6716 65.0267 81.9225 66.3443 83.6284C67.7484 85.4262 68.5095 87.6427 68.5061 89.9238L72.6929 108.278C73.0027 109.635 73.0028 111.046 72.6931 112.403C72.3834 113.761 71.7719 115.032 70.904 116.121C70.0361 117.21 68.9341 118.09 67.6797 118.695C66.4254 119.3 65.0508 119.615 63.6581 119.617C63.5589 119.617 63.4591 119.615 63.3594 119.612Z"
									fill="#2F2E41"
								/>
								<path
									d="M71.5599 65.3143L71.428 64.8303C72.3285 64.5848 73.114 64.3338 73.6081 63.7491C73.7464 63.5762 73.8459 63.3756 73.8998 63.1609C73.9537 62.9461 73.9607 62.7223 73.9203 62.5046C73.899 62.3708 73.8471 62.2437 73.7687 62.1332C73.6902 62.0227 73.5874 61.9318 73.4681 61.8675C72.9876 61.6277 72.3725 61.8925 71.9569 62.2205L71.5986 62.5033L70.9993 56.6644L71.4982 56.6133L72.008 61.58C72.253 61.4148 72.5355 61.3134 72.8297 61.2853C73.1239 61.2571 73.4204 61.3031 73.6923 61.4189C73.8799 61.5165 74.0425 61.6561 74.1673 61.8269C74.292 61.9977 74.3756 62.195 74.4115 62.4035C74.4674 62.6955 74.4587 62.9963 74.3861 63.2847C74.3135 63.573 74.1787 63.842 73.9912 64.0728C73.3564 64.8243 72.3603 65.096 71.5599 65.3143Z"
									fill="#2F2E41"
								/>
								<path
									d="M68.3265 57.8273L65.7017 58.4648L65.82 58.9522L68.4448 58.3146L68.3265 57.8273Z"
									fill="#2F2E41"
								/>
								<path
									d="M54.3902 84.1198C54.2455 83.9617 54.0707 83.834 53.8761 83.744C53.6815 83.654 53.471 83.6036 53.2568 83.5957L50.3404 83.4754L49.5604 83.4428C49.1286 83.4251 48.7074 83.5794 48.3892 83.8718C48.0709 84.1642 47.8816 84.5708 47.8627 85.0025L47.4013 96.1165L46.5863 115.824C46.5697 116.236 46.709 116.638 46.9763 116.951C47.2437 117.264 47.6194 117.464 48.0282 117.512C48.0684 117.517 48.106 117.52 48.1461 117.522L50.3779 117.615L51.845 117.675C51.9624 117.68 52.0801 117.673 52.196 117.652C52.5024 117.598 52.7868 117.457 53.016 117.246C53.1741 117.101 53.3019 116.927 53.3918 116.732C53.4818 116.537 53.5322 116.327 53.5401 116.113L53.6379 113.763L54.3577 96.3823L54.8191 85.2909C54.8371 84.8591 54.6828 84.4379 54.3902 84.1198Z"
									fill="#13A541"
								/>
								<path
									d="M52.2537 81.6838C51.942 81.618 51.6242 81.5852 51.3057 81.586C50.0758 81.5874 48.8966 82.0767 48.0269 82.9464C47.1572 83.8161 46.668 84.9952 46.6665 86.2251V94.7512C46.6672 95.0212 46.7347 95.2868 46.8629 95.5244C46.9911 95.7619 47.176 95.9641 47.4013 96.1129C47.585 96.2338 47.7915 96.3158 48.0081 96.3536C48.1032 96.3717 48.1997 96.381 48.2965 96.3812H54.3149C54.3292 96.3817 54.3435 96.3809 54.3577 96.3787C54.7822 96.3679 55.1856 96.1916 55.4821 95.8876C55.7786 95.5836 55.9447 95.1759 55.9449 94.7512V86.2251C55.9436 85.1597 55.5761 84.1271 54.9041 83.3003C54.2321 82.4735 53.2964 81.9028 52.2537 81.6838Z"
									fill="#2F2E41"
								/>
								<path
									d="M73.0022 88.0464L66.4046 82.6473C65.4526 81.8679 64.2299 81.4985 63.0055 81.6205C61.7811 81.7426 60.6553 82.346 59.8759 83.298C59.0964 84.2501 58.727 85.4728 58.8491 86.6972C58.9711 87.9216 59.5745 89.0473 60.5266 89.8268L67.1243 95.2258C67.4149 95.4639 67.7788 95.5941 68.1545 95.5946C68.5301 95.595 68.8944 95.4657 69.1856 95.2283C69.2724 95.1612 69.3507 95.0837 69.4187 94.9976L73.2304 90.3409C73.3654 90.1776 73.4668 89.9892 73.5288 89.7867C73.6227 89.477 73.6228 89.1465 73.529 88.8368C73.4353 88.5271 73.252 88.2521 73.0022 88.0464Z"
									fill="#2F2E41"
								/>
								<path
									d="M59.2807 54.0748C61.673 54.4516 64.2559 54.884 66.5962 54.0219C68.5136 53.3156 70.129 51.7019 70.0883 49.5536C70.0494 47.5007 68.6585 45.6872 66.9112 44.7302C64.9348 43.6476 62.5276 43.4763 60.3225 43.693C58.9903 43.824 57.5564 44.1598 56.5152 45.0512C55.6818 45.7647 55.0393 46.8448 55.1587 47.9774L54.1852 47.9519C54.5649 46.7007 53.9339 45.4494 52.9808 44.6399C51.8348 43.6665 50.2735 43.5245 48.8476 43.8273C45.9475 44.4432 43.3255 46.4953 41.3995 48.676C39.504 50.8295 38.1363 53.395 37.4048 56.1691C36.5856 59.2846 36.566 62.7768 37.8256 65.7803C39.1076 68.8371 41.8983 71.3555 45.3156 71.5393C45.9623 71.5741 45.9354 72.5829 45.2846 72.5479C42.0223 72.3725 39.1371 70.2853 37.5453 67.4925C35.716 64.2833 35.4801 60.3392 36.2257 56.7799C36.8964 53.6639 38.322 50.7603 40.3772 48.324C42.4282 45.8754 45.3067 43.6074 48.4717 42.8775C50.2903 42.4582 52.2036 42.6779 53.6637 43.9031C54.9102 44.9492 55.6387 46.6372 55.1519 48.2411C55.0182 48.6814 54.2335 48.7382 54.1784 48.2155C53.8989 45.5652 56.0625 43.6423 58.4405 43.0043C59.7894 42.6712 61.1807 42.5436 62.5676 42.6257C63.8414 42.6628 65.1008 42.9055 66.2971 43.3446C68.5535 44.2127 70.4311 46.018 70.9608 48.4359C71.4892 50.8481 70.3208 53.0835 68.2531 54.337C65.5244 55.9914 62.2439 55.555 59.2497 55.0834C59.1174 55.075 58.9933 55.0166 58.9026 54.9201C58.8118 54.8236 58.7611 54.6961 58.7608 54.5636C58.7656 54.4301 58.8229 54.3039 58.9203 54.2123C59.0176 54.1208 59.1471 54.0714 59.2807 54.0748Z"
									fill="#2F2E41"
								/>
								<path
									d="M115.801 148.102H0.303144C0.222746 148.102 0.145639 148.07 0.0887887 148.014C0.0319381 147.957 0 147.88 0 147.799C0 147.719 0.0319381 147.642 0.0887887 147.585C0.145639 147.528 0.222746 147.496 0.303144 147.496H115.801C115.882 147.496 115.959 147.528 116.016 147.585C116.072 147.642 116.104 147.719 116.104 147.799C116.104 147.88 116.072 147.957 116.016 148.014C115.959 148.07 115.882 148.102 115.801 148.102Z"
									fill="#3F3D56"
								/>
							</g>
							<defs>
								<clipPath id="clip0_1182_14077">
									<rect
										width="261"
										height="148.102"
										fill="white"
									/>
								</clipPath>
							</defs>
						</svg>

						<p>No record found</p>
					</aside>
				</section>
			</main>
		</div>
	);
};

export default Rules;
